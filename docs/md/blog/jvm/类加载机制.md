# 类加载机制

作者：qinguan
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

> 故不积跬步，无以至千里；不积小流，无以成江海！🌻

## 简述
Java中的类加载机制是指在Java程序运行时，将`类的字节码文件`加载到`内存`中，并将其转换成Java对象的过程。Java的类加载机制是Java语言的一个重要特性，它使得Java程序可以动态地加载和使用类，从而实现了Java的灵活性和可扩展性。

## 类加载流程
Java的类加载机制主要分为三个阶段：加载、连接和初始化。其中，加载阶段是指将类的字节码文件加载到内存中，并创建一个对应的Class对象；连接阶段包括验证、准备和解析三个子阶段，它们的作用是对类进行验证、分配内存空间和解析符号引用；初始化阶段是指执行类的初始化代码，包括静态变量赋值和静态代码块的执行。
![java类加载流程图](https://raw.githubusercontent.com/qinguan1/qinguan1.github.io/main/docs/assets/img/qinguan/java类加载流程图.png)
其中每一步具体的内容：
1. 加载：在硬盘上查找并通过IO读入字节码文件，使用到类时才会加载，例如调用类的main()方法，new对象等等，在加载阶段会在内存中生成一个代表这个类的java.lang.Class对象，作为方法区这个类的各种数据的访问入口
2. 验证：校验字节码文件的正确性
3. 准备：给类的静态变量分配内存，并赋予默认值
4. 解析：将符号引用替换为直接引用，该阶段会把一些静态方法(符号引用，比如main()方法)替换为指向数据所存内存的指针或句柄等(直接引用)，这是所谓的静态链接过程(类加载期间完成)，动态链接是在程序运行期间完成的将符号引用替换为直接引用，下节课会讲到动态链接
5. 初始化：对类的静态变量初始化为指定的值，执行静态代码块


## 类加载器


## 双亲委派机制

    为什么
    如何打破






