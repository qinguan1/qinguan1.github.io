## java内存模型JMM

作者：qinguan
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

> 故不积跬步，无以至千里；不积小流，无以成江海！🌻

### 一、原子性（Atomicity）

原子性是指一个操作是**不可中断**的。
即使是在多个线程一起执行的时候，一个操作一旦开始，就不会被其他线程干扰。

### 二、可见性（Visibility）

可见性是指当一个线程修改了某一个共享变量的值，其他线程是否能够**立即知道**这个修改。

可见性问题是一个综合性问题。除了上述提到的**缓存优化或者硬件优化**（有些内存读写可能不会立即触发，而会先进入一个硬件队列等待）会导致可见性问题外，**指令重排以及编辑器的优化**，都有可能导致一个线程的修改不会立即被其他线程察觉。

### 三、有序性（Ordering）


### 四、Happen-Before规则

以下罗列了一些基本原则，这些原则是指令重排不可违背的
- 程序顺序原则：一个线程内保证语义的串行性
- volatile规则：volatile变量的写，先发生于读，这保证了volatile变量的
- 可见性
- 锁规则：解锁（unlock）必然发生在随后的加锁（lock）前
- 传递性：A先于B，B先于C，那么A必然先于C
- 线程的start()方法先于它的每一个动作
- 线程的所有操作先于线程的终结（Thread.join()）
- 线程的中断（interrupt()）先于被中断线程的代码
- 对象的构造函数执行、结束先于finalize()方法